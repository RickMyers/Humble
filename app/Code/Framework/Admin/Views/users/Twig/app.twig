
<script type="text/javascript"> 
    //This is for handling "multiplicity", as in multiple explorer apps open at one time
    Humble.admin['users'] = (!Humble.admin['users']) ? {} : Humble.admin['users'];
    Humble.admin['users']['{{ window_id }}'] = Vue.createApp({
        template: Humble.template('admin','users/app'),
        app: "#users_list_body",
        data() {
                return {
                    window_id: "{{ window_id }}",
                    starts_with: "",
                    page: 1,
                    rows: 25,
                    role_id: false,
                    users: [
                        
                    ],
                    roles: [
                    
                    ]
                }
            },
        mounted() {
            console.log('mounted');
            //this.listUsers();
        },
        methods: {
            listUsers() {
                var me = this;
                (new EasyAjax('/admin/users/list')).addForm('user_list_form').then((response) => {
                    let result = JSON.parse(response);
                    if (result.users) {
                        me.users = result.users;
                    }
                    if (result.roles) {
                        me.roles = result.roles;
                    }
                }).post();
            },
            startsWith(letter) {
                $('#')
                alert('t');
            },
            promoteUser() {
            },
            demoteUser() {
            },
            assignRole() {
            },
            upDirectory() {
            }
        }
    });
    var win = Desktop.window.list['{{ window_id }}'];
    Humble.admin['users']['{{ window_id }}'].mount('#'+win.content.id);
    win.resize(() => {
        $('#user_list_body').height(win.content.height() - $E('user_list_header').offsetHeight - $E('user_list_footer').offsetHeight - 2);
    });
    win.close(((app) => {
        return function () {
            app.unmount();
        };
    })(Humble.admin['users']['{{ window_id }}']));     
</script>